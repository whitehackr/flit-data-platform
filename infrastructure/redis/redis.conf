# Redis Configuration for ML Prediction Caching
# Production settings for Railway deployment

# Memory Management
maxmemory 512mb
maxmemory-policy allkeys-lru

# Persistence Configuration
# RDB snapshots for durability
save 900 1      # Save if at least 1 key changed in 900 seconds
save 300 10     # Save if at least 10 keys changed in 300 seconds
save 60 10000   # Save if at least 10000 keys changed in 60 seconds

# AOF for additional durability
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# Network & Security
timeout 300
tcp-keepalive 300

# Logging
loglevel notice

# Performance
tcp-backlog 511
databases 16

# ML Caching Specific Settings
# Use database 0 for transactions, database 1 for predictions
# Database selection handled by application layer